# 全面功能测试用例文档

## 测试环境信息

- **测试日期**: 2026-02-15
- **测试版本**: v1.0.0
- **测试人员**: AI Assistant
- **测试环境**: 
  - 后端: Vercel Serverless Functions
  - 数据库: Supabase PostgreSQL
  - 前端: Vue 3 + Element Plus

---

## 1. Telegram 命令测试用例

### TC-001: /start 命令 - 私聊
**前置条件**: 用户已与机器人开始对话
**测试步骤**:
1. 在私聊中发送 `/start`
**预期结果**:
- 显示欢迎消息
- 显示"👤 我的群组"和"❓ 帮助"按钮
- 消息包含快速开始指南
**实际结果**: ⬜ 通过 / ⬜ 失败
**备注**:

### TC-002: /start 命令 - 群组
**前置条件**: 机器人在群组中
**测试步骤**:
1. 在群组中发送 `/start`
**预期结果**:
- 显示欢迎消息
- 列出可用命令
- 不包含按钮
**实际结果**: ⬜ 通过 / ⬜ 失败
**备注**:

### TC-003: /help 命令
**前置条件**: 无
**测试步骤**:
1. 发送 `/help`
**预期结果**:
- 显示帮助信息
- 列出所有可用命令
**实际结果**: ⬜ 通过 / ⬜ 失败
**备注**:

### TC-004: /settings 命令 - 群组
**前置条件**: 用户是群组管理员
**测试步骤**:
1. 在群组中发送 `/settings`
**预期结果**:
- 显示设置菜单
- 显示24个功能按钮
- 显示当前状态
**实际结果**: ⬜ 通过 / ⬜ 失败
**备注**:

### TC-005: /settings 命令 - 非管理员
**前置条件**: 用户不是群组管理员
**测试步骤**:
1. 在群组中发送 `/settings`
**预期结果**:
- 显示"无权限"提示
**实际结果**: ⬜ 通过 / ⬜ 失败
**备注**:

### TC-006: /mygroups 命令 - 私聊
**前置条件**: 用户已将机器人添加到至少一个群组
**测试步骤**:
1. 在私聊中发送 `/mygroups`
**预期结果**:
- 显示"我的群组"列表
- 每个群组显示名称和成员数
- 显示"管理"按钮
**实际结果**: ⬜ 通过 / ⬜ 失败
**备注**:

### TC-007: /mygroups 命令 - 无群组
**前置条件**: 用户没有将机器人添加到任何群组
**测试步骤**:
1. 在私聊中发送 `/mygroups`
**预期结果**:
- 显示"您还没有将机器人添加到任何群组"
**实际结果**: ⬜ 通过 / ⬜ 失败
**备注**:

### TC-008: /checkin 命令
**前置条件**: 无
**测试步骤**:
1. 发送 `/checkin`
**预期结果**:
- 显示签到成功
- 积分增加
**实际结果**: ⬜ 通过 / ⬜ 失败
**备注**:

### TC-009: /me 命令
**前置条件**: 无
**测试步骤**:
1. 发送 `/me`
**预期结果**:
- 显示个人信息
- 包含用户名、ID、积分
**实际结果**: ⬜ 通过 / ⬜ 失败
**备注**:

### TC-010: /rank 命令
**前置条件**: 无
**测试步骤**:
1. 发送 `/rank`
**预期结果**:
- 显示积分排行榜
**实际结果**: ⬜ 通过 / ⬜ 失败
**备注**:

### TC-011: 命令权限控制 - 禁用命令
**前置条件**: 命令已被管理员禁用
**测试步骤**:
1. 发送被禁用的命令
**预期结果**:
- 显示"⚠️ 该命令已被管理员禁用"
**实际结果**: ⬜ 通过 / ⬜ 失败
**备注**:

### TC-012: 命令权限控制 - 无权限
**前置条件**: 命令仅限管理员使用
**测试步骤**:
1. 非管理员发送该命令
**预期结果**:
- 显示"⚠️ 该命令仅限管理员使用"
**实际结果**: ⬜ 通过 / ⬜ 失败
**备注**:

---

## 2. Telegram 菜单功能测试用例

### 2.1 初级功能（10个）

#### TC-101: 进群验证 - 开启
**前置条件**: 用户是群组管理员
**测试步骤**:
1. 点击"😊 进群验证"按钮
**预期结果**:
- 状态切换为"✅ 已开启"
- 数据库 `verification_enabled` 更新为 true
**实际结果**: ⬜ 通过 / ⬜ 失败
**备注**:

#### TC-102: 进群验证 - 关闭
**前置条件**: 进群验证已开启
**测试步骤**:
1. 点击"😊 进群验证"按钮
**预期结果**:
- 状态切换为"❌ 已关闭"
- 数据库 `verification_enabled` 更新为 false
**实际结果**: ⬜ 通过 / ⬜ 失败
**备注**:

#### TC-103: 欢迎消息 - 开关
**前置条件**: 用户是群组管理员
**测试步骤**:
1. 点击"👋 欢迎消息"按钮
**预期结果**:
- 状态正确切换
- 数据库 `welcome_enabled` 更新
**实际结果**: ⬜ 通过 / ⬜ 失败
**备注**:

#### TC-104-111: 其他初级功能
- TC-104: 自动回复
- TC-105: 自动删除
- TC-106: 自动封禁
- TC-107: 自动警告
- TC-108: 自动禁言
- TC-109: 刷屏处理
- TC-110: 广告封杀
- TC-111: 命令关闭

**测试方法**: 同上，验证开关功能和数据库同步

### 2.2 中级功能（8个）

#### TC-201: 加密货币 - 进入子菜单
**前置条件**: 用户是群组管理员
**测试步骤**:
1. 点击"💎 加密货币"按钮
**预期结果**:
- 显示子菜单
- 显示配置选项
- 显示返回按钮
**实际结果**: ⬜ 通过 / ⬜ 失败
**备注**:

#### TC-202-208: 其他中级功能
- TC-202: 群组成员
- TC-203: 定时消息
- TC-204: 积分相关
- TC-205: 活跃度统计
- TC-206: 娱乐功能
- TC-207: 实时查U价
- TC-208: 关联频道

**测试方法**: 验证能进入子菜单

### 2.3 高级功能（6个）

#### TC-301: 管理权限 - 进入子菜单
**前置条件**: 用户是群组管理员
**测试步骤**:
1. 点击"👮 管理权限"按钮
**预期结果**:
- 显示子菜单
- 显示配置选项
**实际结果**: ⬜ 通过 / ⬜ 失败
**备注**:

#### TC-302-306: 其他高级功能
- TC-302: 色情检测
- TC-303: 语言白名单
- TC-304: 邀请链接
- TC-305: 抽奖
- TC-306: 认证用户

### 2.4 导航测试

#### TC-401: 返回按钮
**前置条件**: 在子菜单中
**测试步骤**:
1. 点击"🔙 返回"按钮
**预期结果**:
- 返回主菜单
**实际结果**: ⬜ 通过 / ⬜ 失败
**备注**:

#### TC-402: 菜单状态实时更新
**前置条件**: 在菜单界面
**测试步骤**:
1. 点击功能按钮切换状态
**预期结果**:
- 菜单立即显示新状态
- 无需重新打开菜单
**实际结果**: ⬜ 通过 / ⬜ 失败
**备注**:

---

## 3. Web 后台功能测试用例

### TC-501: 验证码登录
**前置条件**: 用户已与机器人对话
**测试步骤**:
1. 访问登录页面
2. 输入 Telegram ID
3. 点击"获取验证码"
4. 在 Telegram 查看验证码
5. 输入验证码
6. 点击"登录"
**预期结果**:
- 验证码发送到 Telegram
- 登录成功
- 跳转到管理页面
**实际结果**: ⬜ 通过 / ⬜ 失败
**备注**:

### TC-502: 登录后显示用户权限
**前置条件**: 已登录
**测试步骤**:
1. 查看页面右上角用户信息
**预期结果**:
- 显示用户名
- 显示权限等级
**实际结果**: ⬜ 通过 / ⬜ 失败
**备注**:

### TC-503: 群组列表显示
**前置条件**: 已登录
**测试步骤**:
1. 进入群组管理页面
**预期结果**:
- 显示用户可管理的群组
- 显示群组名称和成员数
**实际结果**: ⬜ 通过 / ⬜ 失败
**备注**:

### TC-504: 功能开关总览
**前置条件**: 已进入群组配置页面
**测试步骤**:
1. 查看"功能开关总览"面板
**预期结果**:
- 显示24个功能开关
- 按初级/中级/高级分类
- 显示当前状态
**实际结果**: ⬜ 通过 / ⬜ 失败
**备注**:

### TC-505: 功能开关切换
**前置条件**: 在群组配置页面
**测试步骤**:
1. 点击任意功能开关
2. 点击"保存配置"
**预期结果**:
- 开关状态改变
- 保存成功提示
- 数据库更新
**实际结果**: ⬜ 通过 / ⬜ 失败
**备注**:

### TC-506: 命令配置保存
**前置条件**: 在群组配置页面
**测试步骤**:
1. 进入"命令设置"标签
2. 修改命令配置
3. 保存
**预期结果**:
- 配置保存成功
- Telegram 中命令权限生效
**实际结果**: ⬜ 通过 / ⬜ 失败
**备注**:

### TC-507: 积分配置保存
**前置条件**: 在群组配置页面
**测试步骤**:
1. 进入"积分配置"标签
2. 修改积分规则
3. 保存
**预期结果**:
- 配置保存成功
**实际结果**: ⬜ 通过 / ⬜ 失败
**备注**:

---

## 4. 数据同步测试用例

### TC-601: Telegram → Web 后台同步
**前置条件**: 在 Telegram 中修改配置
**测试步骤**:
1. 在 Telegram 群组中开启"欢迎消息"
2. 刷新 Web 后台页面
**预期结果**:
- Web 后台显示"欢迎消息"已开启
**实际结果**: ⬜ 通过 / ⬜ 失败
**备注**:

### TC-602: Web 后台 → Telegram 同步
**前置条件**: 在 Web 后台修改配置
**测试步骤**:
1. 在 Web 后台关闭"欢迎消息"
2. 在 Telegram 中打开 /settings 菜单
**预期结果**:
- Telegram 菜单显示"欢迎消息"已关闭
**实际结果**: ⬜ 通过 / ⬜ 失败
**备注**:

### TC-603: 多群组配置隔离
**前置条件**: 用户管理多个群组
**测试步骤**:
1. 在群组A开启"欢迎消息"
2. 在群组B关闭"欢迎消息"
**预期结果**:
- 群组A和群组B的配置互不影响
**实际结果**: ⬜ 通过 / ⬜ 失败
**备注**:

---

## 5. 权限系统测试用例

### TC-701: 超级管理员权限
**前置条件**: 用户等级为 10
**测试步骤**:
1. 访问所有功能
**预期结果**:
- 可以访问所有群组
- 可以修改所有配置
**实际结果**: ⬜ 通过 / ⬜ 失败
**备注**:

### TC-702: 群组管理员权限
**前置条件**: 用户等级为 5
**测试步骤**:
1. 访问自己添加的群组
2. 访问其他群组
**预期结果**:
- 可以管理自己添加的群组
- 无法管理其他群组
**实际结果**: ⬜ 通过 / ⬜ 失败
**备注**:

### TC-703: 普通用户权限
**前置条件**: 用户等级为 0
**测试步骤**:
1. 尝试管理群组
**预期结果**:
- 只能查看群组列表
- 无法修改配置
**实际结果**: ⬜ 通过 / ⬜ 失败
**备注**:

### TC-704: 非管理员访问限制 - Telegram
**前置条件**: 用户不是群组管理员
**测试步骤**:
1. 点击菜单按钮
**预期结果**:
- 显示"⚠️ 您没有权限使用此功能"
**实际结果**: ⬜ 通过 / ⬜ 失败
**备注**:

### TC-705: 非管理员访问限制 - Web
**前置条件**: 用户没有管理任何群组
**测试步骤**:
1. 登录 Web 后台
**预期结果**:
- 显示"您没有可管理的群组"
**实际结果**: ⬜ 通过 / ⬜ 失败
**备注**:

---

## 6. 入群验证流程测试用例

### TC-801: 新成员入群触发验证
**前置条件**: 进群验证已开启
**测试步骤**:
1. 新成员加入群组
**预期结果**:
- 机器人发送验证题目
- 新成员被限制发言
**实际结果**: ⬜ 通过 / ⬜ 失败
**备注**:

### TC-802: 验证通过流程
**前置条件**: 新成员收到验证题目
**测试步骤**:
1. 新成员回答正确
**预期结果**:
- 验证通过
- 解除发言限制
- 发送欢迎消息
**实际结果**: ⬜ 通过 / ⬜ 失败
**备注**:

### TC-803: 验证失败处理
**前置条件**: 新成员收到验证题目
**测试步骤**:
1. 新成员回答错误超过3次
**预期结果**:
- 踢出群组或继续限制
**实际结果**: ⬜ 通过 / ⬜ 失败
**备注**:

### TC-804: 欢迎消息发送
**前置条件**: 欢迎消息已开启
**测试步骤**:
1. 新成员通过验证
**预期结果**:
- 发送欢迎消息
- 消息内容正确
**实际结果**: ⬜ 通过 / ⬜ 失败
**备注**:

---

## 7. 消息处理测试用例

### TC-901: 广告过滤
**前置条件**: 广告封杀已开启
**测试步骤**:
1. 发送包含广告关键词的消息
**预期结果**:
- 消息被删除
- 发送警告
**实际结果**: ⬜ 通过 / ⬜ 失败
**备注**:

### TC-902: 刷屏检测
**前置条件**: 刷屏处理已开启
**测试步骤**:
1. 快速发送多条消息
**预期结果**:
- 检测到刷屏行为
- 删除消息或禁言用户
**实际结果**: ⬜ 通过 / ⬜ 失败
**备注**:

### TC-903: 自动删除
**前置条件**: 自动删除已开启
**测试步骤**:
1. 发送符合删除规则的消息
**预期结果**:
- 消息被自动删除
**实际结果**: ⬜ 通过 / ⬜ 失败
**备注**:

### TC-904: 自动回复
**前置条件**: 自动回复已开启，配置了关键词
**测试步骤**:
1. 发送包含关键词的消息
**预期结果**:
- 机器人自动回复
**实际结果**: ⬜ 通过 / ⬜ 失败
**备注**:

---

## 8. 性能测试用例

### TC-1001: 命令响应时间
**测试步骤**:
1. 发送命令
2. 记录响应时间
**预期结果**:
- 响应时间 < 2秒
**实际结果**: ⬜ 通过 / ⬜ 失败
**备注**:

### TC-1002: 菜单加载时间
**测试步骤**:
1. 打开 /settings 菜单
2. 记录加载时间
**预期结果**:
- 加载时间 < 2秒
**实际结果**: ⬜ 通过 / ⬜ 失败
**备注**:

### TC-1003: 数据库查询性能
**测试步骤**:
1. 执行配置查询
2. 记录查询时间
**预期结果**:
- 查询时间 < 500ms
**实际结果**: ⬜ 通过 / ⬜ 失败
**备注**:

---

## 测试总结

| 测试类别 | 测试用例数 | 通过 | 失败 | 通过率 |
|---------|-----------|------|------|--------|
| Telegram 命令 | 12 | - | - | - |
| Telegram 菜单 | 24 | - | - | - |
| Web 后台 | 7 | - | - | - |
| 数据同步 | 3 | - | - | - |
| 权限系统 | 5 | - | - | - |
| 入群验证 | 4 | - | - | - |
| 消息处理 | 4 | - | - | - |
| 性能测试 | 3 | - | - | - |
| **总计** | **62** | - | - | - |

---

## 发现的问题

### 问题 1
- **描述**: 
- **严重程度**: 高/中/低
- **建议修复**: 

### 问题 2
- **描述**: 
- **严重程度**: 高/中/低
- **建议修复**: 

---

## 修复建议

1. 
2. 
3. 
